<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Film</title>
    <link rel="stylesheet" href="css/swiper-bundle.min.css">
    <link rel="stylesheet" href="css/main.css">
</head>
<body>
    <main class="site-main">
        <div class="frame-wrapper">
            <!-- Slider main container -->
            <div class="swiper">
                <!-- Additional required wrapper -->
                <div class="swiper-wrapper">
                    <!-- Slides -->
                    <div class="swiper-slide">
                        <div class="content-wrapper min-h-screen">
                            <div class="white-vector">
                                <img src="./images/white-vector-with-dots.png" alt="">
                            </div>
                            <div class="right-path">
                                <img src="./images/first-screen-end-path.png" alt="End path">
                            </div>
                            <div class="d-flex items-center contents">
                                <div class="camera-man">
                                    <img src="./images/camera-man.png" alt="Camera man">
                                </div>
                                <div class="animated-text">
                                    <span class="text-orange">Do you wanna</span>
                                    <h1>Make a movie?</h1>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="swiper-slide">
                        <div class="second-slide-content min-h-screen d-flex justify-center">
                            <div class="content-text text-center">
                                <div class="animate-on-show">
                                    <h2>What does long beach <span class="text-orange">MEAN To You?</span></h2>
                                    <span>Become part of filmmaking history</span>
                                </div>
                            </div>
                            <img src="./images/buildings-vector.png" alt="" class="building-vector" />
                        </div>
                    </div>
                    <div class="swiper-slide">
                        <div class="film-theater">
                            <div class="min-h-screen d-flex items-center">
                                <div class="movie-screen">
                                    <div class="movie-frame">
                                        <h2>Submit your short <br /> film to our contest</h2>
                                    </div>
                                </div>
                                <div class="viewers-gallery">
                                    <img src="./images/viewers-gallery.png" alt="Viewers vector" />
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="swiper-slide">
                        <div class="last-screen min-h-screen d-flex direction-column items-center">
                            <div class="left-white-vector">
                                <img src="images/white-vector-horizontal-right.png" alt="White vector">
                            </div>
                            <h4>For a chance to win prizes and the oportunity to be a part of a feature film</h4>
                            <div class="heart-wrap d-flex justify-center items-center">
                                <img src="./images/THOLB_HeartBeat_FHD.gif" alt="Tholb heart beat">
                            </div>
                            <div class="content-bottom d-flex direction-column items-center">
                                <h4>A film contest that supports you - the filmmaker.</h4>
                                <div class="social-items d-flex items-center">
                                    <a href="#"><img src="./images/social-icons/facebook-icon.png" alt="Facebook icon"></a>
                                    <a href="#"><img src="./images/social-icons/instagram-icon.png" alt="Instagram icon"></a>
                                    <a href="#"><img src="./images/social-icons/youtube-icon.png" alt="Youtube icon"></a>
                                    <a href="#"><img src="./images/social-icons/heart-icon.png" alt="Heart icon"></a>
                                </div>
                                <button class="btn btn-signup rounded">Sing Up</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="modal-wrap" id="subscribe-modal">
            <div class="modal-inner d-flex items-center justify-center">
                <div class="modal-content">
                    <h3>Jom our film community</h3>
                    <p>Stay up to date about the film and contest, submission details, workshops, and events!</p>
                    <form>
                        <div class="field-wrap d-flex">
                            <input type="email" placeholder="Enter your email">
                            <button type="submit" class="btn btn-submit">Suscribe</button>
                        </div>
                        <button class="btn btn-modal-close">No thanks</button>
                    </form>
                </div>
            </div>
        </div>
    </main>
    <script src="js/jquery-3.6.1.min.js"></script>
    <script src="js/swiper-bundle.min.js"></script>
    <script src="js/TweenMax.min.js"></script>
    <script type="text/javascript">
        (function($){
            $(function(){

                $(".btn-signup").on("click", function(){
                    $('#subscribe-modal').fadeIn();
                });
                
                $(".btn-modal-close").on("click", function(e){
                    e.preventDefault();
                    $('#subscribe-modal').fadeOut();
                })

                const filmSwiper = new Swiper('.swiper', {
                    // Optional parameters
                    // direction: 'vertical',
                    loop: false,
                    slidesPerView: 1,
                    spaceBetween: 0,
                    mousewheel: true,
                    speed: 4000,
                    autoplay: {
                        delay: 5300,
                        // disableOnInteraction: true,
                        pauseOnMouseEnter: true,
                        stopOnLastSlide: true
                    },
                    on: {
                        init: function(){
                            firstSlideAnimation();
                            console.log('swiper initialized');
                        },
                        slideChange: function(swiper){
                            console.log('slide change');
                            console.log('*** mySwiper.realIndex', swiper.realIndex);
                            if(swiper.realIndex == 1){
                                pauseVideoStripe();
                            }
                            if(swiper.realIndex == 2){
                                whiteVectorReverse();
                            }
                            if(swiper.realIndex == 3){
                                whiteVectorMove();
                                pauseVideoStripe();
                            }
                        },
                        transitionEnd: function(swiper){
                            if(swiper.realIndex == 1){
                                secondSildeAnimation()
                            }
                            if(swiper.realIndex == 2){
                                thirdScreenAnimation();
                                playVideoStripe();
                            }
                            if(swiper.realIndex == 3){
                                lastScreenAnimation();
                            }
                        }
                    }
                });

                filmSwiper.on('transitionEnd', function() {
                    console.log('*** mySwiper.realIndex', filmSwiper.realIndex);
                });
                // filmSwiper.on('slideChange', function() {
                //     console.log('slide changed');
                // });


                

                function firstSlideAnimation(){
                    var whiteVactor = $('.white-vector'),
                        Text = $('.animated-text');

                        TweenMax.fromTo(whiteVactor, 3.5,
                            {
                                clipPath: 'polygon(0 0, 0 0, 0 100%, 0 100%)'
                            },
                            {
                                clipPath: 'polygon(0 0, 100% 0, 100% 100%, 0 100%)',
                                // ease:Power1.easeOut
                            }
                        );
                        TweenMax.fromTo(whiteVactor, .8,{
                            clipPath: 'polygon(0 0, 100% 0, 100% 100%, 0 100%)',
                        },{
                            clipPath: 'polygon(0px 0px, 100% 0px, 100% 64%, 0px 100%)',
                            delay: 2.5
                        });
                        TweenMax.to(Text, 2,
                            {
                                opacity: 1,
                                delay: 3.8
                            }
                        );
                }

                function secondSildeAnimation(){
                    TweenMax.to('.animate-on-show h2', 2,
                        {
                            opacity: 1
                        }
                    );
                    TweenMax.to('.animate-on-show > span', 3,
                        // {
                        //     opacity: 0
                        // },
                        {
                            opacity: 1,
                            delay: .8
                        }
                    );
                }

                function thirdScreenAnimation(){
                    TweenMax.to('.movie-screen', 1,
                        {
                            opacity: 1,
                            delay: .3
                        }
                    );
                };

                function pauseVideoStripe(){
                    TweenMax.to('.movie-frame', .3, {
                        animationPlayState: 'paused'
                    })
                }

                function playVideoStripe(){
                    TweenMax.to('.movie-frame', .3, {
                        animationPlayState: 'running'
                    })
                }

                function whiteVectorMove(){
                    TweenMax.fromTo('.left-white-vector', 4, 
                        {
                            lef: '-7rem'
                        },
                        {
                            left: '-33rem',
                            // delay: 1
                        }
                    )
                }

                function whiteVectorReverse(){
                    TweenMax.fromTo('.left-white-vector', 4, 
                        {
                            lef: '-33rem'
                        },
                        {
                            left: '-7rem',
                            // delay: 1
                        }
                    )
                }

                function lastScreenAnimation(){
                    // TweenMax.fromTo('.left-white-vector', .3, 
                    //     {
                    //         lef: 0
                    //     },
                    //     {
                    //         left: '-33rem'
                    //     }
                    // )
                }

            })
        })(jQuery)
    </script>
</body>
</html>